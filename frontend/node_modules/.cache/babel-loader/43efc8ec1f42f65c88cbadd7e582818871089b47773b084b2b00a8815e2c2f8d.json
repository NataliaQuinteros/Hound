{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import api from\"../api/api\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Accelerometer(){const[permissionGranted,setPermissionGranted]=useState(false);const[x,setX]=useState(null);const[y,setY]=useState(null);const[z,setZ]=useState(null);const[currentTime,setCurrentTime]=useState(null);const[networkScan,setNetworkScan]=useState({status:'',signal_started_at:'',location_started_at:''});const[locationData,setLocationData]=useState({network_scan_id:'',x:'',y:'',z:'',location_started_at:''});// console.log(\"x, y, z:\", x, y, z);\n// const fetchLocationData = async () => {\n//   const response = await api.get('/locations/')\n//   setLocationData(response.data)\n// }\nuseEffect(()=>{if(typeof DeviceMotionEvent.requestPermission===\"function\"){DeviceMotionEvent.requestPermission().then(permissionState=>{if(permissionState===\"granted\"){setPermissionGranted(true);window.addEventListener(\"devicemotion\",handleMotionEvent);}}).catch(console.error);}else{setPermissionGranted(true);window.addEventListener(\"devicemotion\",handleMotionEvent);}return()=>{window.removeEventListener(\"devicemotion\",handleMotionEvent);};},[]);function handleMotionEvent(event){setX(event.acceleration.x);setY(event.acceleration.y);setZ(event.acceleration.z);setCurrentTime(new Date().toJSON());console.log(\"date:\",currentTime);// setTimeout(async() => {\n//   await api.post('/locations', locationData);\n//   setLocationData({\n//     x: x,\n//     y: y,\n//     z: z, \n//     location_started_at: currentTime\n//   });\n// }, 1)\n}function handlePermissionGranted(){DeviceMotionEvent.requestPermission().then(permissionState=>{if(permissionState===\"granted\"){setPermissionGranted(true);window.addEventListener(\"devicemotion\",handleMotionEvent);}}).catch(console.error);}return/*#__PURE__*/_jsx(_Fragment,{children:permissionGranted?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"X: \",x]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Y: \",y]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Z: \",z]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"modal\",id:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Allow access to device motion and orientation\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This app requires access to device motion and orientation to function properly.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handlePermissionGranted,children:\"Grant Permission\"})]})})});}export default Accelerometer;","map":{"version":3,"names":["React","useEffect","useState","api","jsxs","_jsxs","Fragment","_Fragment","jsx","_jsx","Accelerometer","permissionGranted","setPermissionGranted","x","setX","y","setY","z","setZ","currentTime","setCurrentTime","networkScan","setNetworkScan","status","signal_started_at","location_started_at","locationData","setLocationData","network_scan_id","DeviceMotionEvent","requestPermission","then","permissionState","window","addEventListener","handleMotionEvent","catch","console","error","removeEventListener","event","acceleration","Date","toJSON","log","handlePermissionGranted","children","className","id","onClick"],"sources":["/home/hound/Hound/frontend/src/accelerometer/accelerometer.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport api from \"../api/api\";\n\nfunction Accelerometer() {\n  const [permissionGranted, setPermissionGranted] = useState(false);\n  const [x, setX] = useState(null);\n  const [y, setY] = useState(null);\n  const [z, setZ] = useState(null);\n  const [currentTime, setCurrentTime] = useState(null); \n  const [networkScan, setNetworkScan] = useState({\n    status: '',\n    signal_started_at: '',\n    location_started_at: ''\n  });\n  const [locationData, setLocationData] = useState({\n    network_scan_id: '',\n    x: '',\n    y: '',\n    z: '',\n    location_started_at: ''\n  });\n  // console.log(\"x, y, z:\", x, y, z);\n  // const fetchLocationData = async () => {\n  //   const response = await api.get('/locations/')\n  //   setLocationData(response.data)\n  // }\n\n\n  useEffect(() => {\n    if (typeof DeviceMotionEvent.requestPermission === \"function\") {\n      DeviceMotionEvent.requestPermission()\n        .then((permissionState) => {\n          if (permissionState === \"granted\") {\n            setPermissionGranted(true);\n            window.addEventListener(\"devicemotion\", handleMotionEvent);\n          }\n        })\n        .catch(console.error);\n    } else {\n      setPermissionGranted(true);\n      window.addEventListener(\"devicemotion\", handleMotionEvent);\n    }\n\n    return () => {\n      window.removeEventListener(\"devicemotion\", handleMotionEvent);\n    };\n  }, []);\n\n  function handleMotionEvent(event) {\n    setX(event.acceleration.x);\n    setY(event.acceleration.y);\n    setZ(event.acceleration.z);\n    setCurrentTime((new Date()).toJSON())\n    console.log(\"date:\", currentTime);\n\n    // setTimeout(async() => {\n    //   await api.post('/locations', locationData);\n    //   setLocationData({\n    //     x: x,\n    //     y: y,\n    //     z: z, \n    //     location_started_at: currentTime\n    //   });\n    // }, 1)\n  }\n\n  function handlePermissionGranted() {\n    DeviceMotionEvent.requestPermission()\n      .then((permissionState) => {\n        if (permissionState === \"granted\") {\n          setPermissionGranted(true);\n          window.addEventListener(\"devicemotion\", handleMotionEvent);\n        }\n      })\n      .catch(console.error);\n  }\n\n  return (\n    <>\n      {permissionGranted ? (\n        <>\n          <p>X: {x}</p>\n          <p>Y: {y}</p>\n          <p>Z: {z}</p>\n        </>\n      \n      ) : (\n        <div className=\"modal\" id=\"modal\">\n          <div className=\"modal-content\">\n            <h2>Allow access to device motion and orientation</h2>\n            <p>\n              This app requires access to device motion and orientation to\n              function properly.\n            </p>\n            <button className=\"btn\" onClick={handlePermissionGranted}>\n              Grant Permission\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default Accelerometer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}